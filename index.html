<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeX to Markdown Converter</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        textarea { width: 80%; height: 150px; margin-bottom: 10px; }
        button { padding: 10px; cursor: pointer; }
        pre { background: #f4f4f4; padding: 10px; width: 80%; margin: auto; text-align: left; }
    </style>
</head>
<body>
    <h2>LaTeX to Markdown Converter</h2>
    <textarea id="latexInput" placeholder="Enter LaTeX code here..."></textarea><br>
    <button onclick="convert()">Convert</button>
    <h3>Markdown Output:</h3>
    <pre id="markdownOutput"></pre>

    <script>
        function convert() {
    let latex = document.getElementById("latexInput").value;

    // ... (keep existing initial cleanup code) ...

    let markdown = latex
        // Lists - Enhanced version
        .replace(/\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/g, (match, content) => {
            return content.split('\\item').slice(1)
                .map(item => '- ' + item.trim())
                .join('\n');
        })
        .replace(/\\begin\{enumerate\}([\s\S]*?)\\end\{enumerate\}/g, (match, content) => {
            return content.split('\\item').slice(1)
                .map((item, index) => `${index + 1}. ${item.trim()}`)
                .join('\n');
        })
        
        // Verbatim environments
        .replace(/\\begin\{verbatim\}([\s\S]*?)\\end\{verbatim\}/g, (match, content) => {
            return '\n```\n' + content.trim() + '\n```\n';
        })
        
        // Text formatting - Enhanced version
        .replace(/\\texttt\{([^}]+)\}/g, '`$1`')
        .replace(/\\textbf\{([^}]+)\}/g, '**$1**')
        .replace(/\\textit\{([^}]+)\}/g, '*$1*')
        .replace(/\\emph\{([^}]+)\}/g, '*$1*')
        
        // Simple items outside environments
        .replace(/\\item\s+/g, '- ')
        
        // Headers (keep existing code)
        .replace(/\\section\{(.*?)\}/g, '# $1\n')
        .replace(/\\subsection\{(.*?)\}/g, '## $1\n')
        .replace(/\\subsubsection\{(.*?)\}/g, '### $1\n')
        
        // URLs and links (enhanced)
        .replace(/\\url\{([^}]+)\}/g, '<$1>')
        .replace(/\\href\{([^}]+)\}\{([^}]+)\}/g, '[$2]($1)')
        
        // Clean up extra whitespace and newlines
        .replace(/\n\s*\n\s*\n/g, '\n\n')
        .replace(/\n\s+/g, '\n')
        .trim();

    // Combine all elements
    markdown = title + author + date + markdown;

    // Display the converted Markdown
    document.getElementById("markdownOutput").innerText = markdown || "Conversion failed";
}

    </script>
</body>
</html>
